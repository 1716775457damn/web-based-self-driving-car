<xml version="Mixly 2.0 rc3" board="Arduino ESP32@ESP32 Dev Module"><block type="base_setup" id="Ow$B9y:UP:X7{c}!nVXL" x="-396" y="-472"><statement name="DO"><block type="init_Bemfa_TCP" id="q7wnWEDto|[+.^F*uSo,"><value name="tcp_Server"><shadow type="text" id="4E.]7(A.yFV,M#T:PKZh"><field name="TEXT">bemfa.com</field></shadow></value><value name="tcp_port"><shadow type="math_number" id="hFT878U_[=!INvdizIv]"><field name="NUM">8344</field></shadow></value><value name="tcp_client_id"><shadow type="text" id="w6sYZzV?}$oX*p4Z/4I@"><field name="TEXT">c5af7df6bf9558c03f69df6ca3b3db12</field></shadow></value><next><block type="serial_begin" id="coWK8BpbQT6fMz=i}K$M"><field name="serial_select">Serial</field><value name="CONTENT"><shadow type="math_number" id="i9Tz4S-[vZ-n{{3xf-bc"><field name="NUM">9600</field></shadow></value></block></next></block></statement></block><block type="bemfa_tcp_sub_topic_rev_msg" id="$~{#udf{QOE,c1LL3,Be" x="-388" y="-245"><statement name="DO"><block type="bemfa_tcp_Sub_Topic" id=";xyd+~{D5H+mD[OINHj:"><value name="tcp_sub_Topic"><shadow type="text" id="-CdXxCLd$_PEw:rLr{2!"><field name="TEXT">mycar</field></shadow></value></block></statement><statement name="bemfa_function_tcp_rev_msg"><block type="serial_println" id="m~sscid2RL(jB|vx/WN8"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="variables_get" id="R7v4:ZS27QZ3;Cd?J`Al"><field name="VAR">topic</field></block></value><next><block type="serial_println" id="1[9Rps=GFeU`L)^?u2I("><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="variables_get" id="CFW4gX=b{Qlh0WG~rD6`"><field name="VAR">msg</field></block></value><next><block type="controls_if" id="3EpTTpC7MOqz|1)wZ5sS"><value name="IF0"><block type="serial_available" id="X~$w^Hl)3-[3j*kahw=Z"><field name="serial_select">Serial</field></block></value><statement name="DO0"><block type="controls_if" id="J8)z^#i~03dRY*Kp:KPL"><value name="IF0"><block type="logic_compare" id="ZERTvnOZBh[@x.jYl9A2"><field name="OP">EQ</field><value name="A"><block type="serial_readstr" id="]`4tm[(Y0dxSY9_YxyyU"><field name="serial_select">Serial</field></block></value><value name="B"><block type="text_char" id="Jm$_F.@oSsIzR:|Kl@XP"><field name="TEXT">l</field></block></value></block></value><statement name="DO0"><block type="inout_digital_write2" id="E7h1K-JK^f3UH`Yn#eGX"><value name="PIN"><shadow type="pins_digitalWrite" id="aheSF703`8o,b`gmMgJl"><field name="PIN">0</field></shadow></value><value name="STAT"><shadow type="inout_highlow" id="7;Q=b:^mf^TF_;h(r([Q"><field name="BOOL">HIGH</field></shadow></value><next><block type="controls_delay" id="(,7*l#{TpEui.Qcc:s5y"><field name="UNIT">delay</field><value name="DELAY_TIME"><shadow type="math_number" id="klh50Dv:NqioeQ@`R9ke"><field name="NUM">1000</field></shadow></value><next><block type="bemfa_tcp_Pub_Topic_payload" id="DEz4PSrc+mTvVa2!9Jwf"><value name="pub_Topic"><shadow type="text" id="r3={z-0Gy=:fWz]^)hP:"><field name="TEXT">mycar</field></shadow></value><value name="payload"><shadow type="text" id="[{LD#mL,2cw{sD]u`mO@"><field name="TEXT">s</field></shadow></value></block></next></block></next></block></statement><next><block type="controls_if" id="S[W;7?QwKF~eo.I/rg1]"><value name="IF0"><block type="logic_compare" id="q0z_WQ)]O~SjgP*[kvV{"><field name="OP">EQ</field><value name="A"><block type="serial_readstr" id="IMy;[$G$Rk|n$$AaP!a`"><field name="serial_select">Serial</field></block></value><value name="B"><block type="text_char" id="1mTng3/nlI1/8w*i@2g^"><field name="TEXT">r</field></block></value></block></value><statement name="DO0"><block type="inout_digital_write2" id="1hY{NLAXQv-Vb7BaAkKx"><value name="PIN"><shadow type="pins_digitalWrite" id="XF]=U$ObQac2zf,l(Y2A"><field name="PIN">0</field></shadow></value><value name="STAT"><shadow type="inout_highlow" id="QnsJ,7+Hz/WF(EICK`T^"><field name="BOOL">HIGH</field></shadow></value><next><block type="controls_delay" id="-~(vs7qE=|Im^4-CX9Oi"><field name="UNIT">delay</field><value name="DELAY_TIME"><shadow type="math_number" id="fHP4_Q+0+Sa;x/QQ4a^N"><field name="NUM">1000</field></shadow></value><next><block type="bemfa_tcp_Pub_Topic_payload" id="ax4nopfJN]/+f^W$3T_]"><value name="pub_Topic"><shadow type="text" id="h]4oHH$6{5=F3~72Qy}N"><field name="TEXT">mycar</field></shadow></value><value name="payload"><shadow type="text" id="q+K];?wptlhv{([cKSt5"><field name="TEXT">s</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement></block></next></block></next></block></statement></block></xml><config>{"PSRAM":"disabled","PartitionScheme":"default","CPUFreq":"240","FlashMode":"qio","FlashFreq":"80","FlashSize":"4M","UploadSpeed":"921600","LoopCore":"1","EventsCore":"1"}</config><code>CiNpbmNsdWRlIDxXaUZpLmg+CiNkZWZpbmUgVENQX1NFUlZFUl9BRERSICJiZW1mYS5jb20iCiNkZWZpbmUgVENQX1NFUlZFUl9QT1JUICI4MzQ0IgojaWZuZGVmIEFQX0NPTkZJRwpTdHJpbmcgVUlEID0gImM1YWY3ZGY2YmY5NTU4YzAzZjY5ZGY2Y2EzYjNkYjEyIjsKI2VuZGlmCiNkZWZpbmUgTUFYX1BBQ0tFVFNJWkUgNTEyCiNkZWZpbmUgS0VFUEFMSVZFQVRJTUUgMzAqMTAwMApXaUZpQ2xpZW50IFRDUGNsaWVudDsKU3RyaW5nIFRjcENsaWVudF9CdWZmID0gIiI7CnVuc2lnbmVkIGludCBUY3BDbGllbnRfQnVmZkluZGV4ID0gMDsKdW5zaWduZWQgbG9uZyBUY3BDbGllbnRfcHJlVGljayA9IDA7CnVuc2lnbmVkIGxvbmcgcHJlSGVhcnRUaWNrID0gMDsKdW5zaWduZWQgbG9uZyBwcmVUQ1BTdGFydFRpY2sgPSAwOwpib29sIHByZVRDUENvbm5lY3RlZCA9IGZhbHNlOwpib29sIHN1YkZsYWcgPSBmYWxzZTsKdm9pZCBkb1dpRmlUaWNrKCk7CnZvaWQgZG9UQ1BDbGllbnRUaWNrKCk7CnZvaWQgc2VuZHRvVENQU2VydmVyKFN0cmluZyBwKTsKdm9pZCBzdWJUb3BpYyhTdHJpbmcgdG9waWMpewogIFN0cmluZyB0Y3BUZW1wPSIiOwogIHRjcFRlbXAgPSAiY21kPTEmdWlkPSIrVUlEKyImdG9waWM9Iit0b3BpYysiXHJcbiI7CiAgc2VuZHRvVENQU2VydmVyKHRjcFRlbXApOwogIHRjcFRlbXA9IiI7CiAgU2VyaWFsLnByaW50KCJzdWIgdG9waWM6Iik7U2VyaWFsLnByaW50bG4odG9waWMpOwogIH0Kdm9pZCBkb1dpRmlUaWNrKCl7CiBzdGF0aWMgYm9vbCB0YXNrU3RhcnRlZCA9IGZhbHNlOwogc3RhdGljIHVpbnQzMl90IGxhc3RXaUZpQ2hlY2tUaWNrID0gMDsKIGlmICggV2lGaS5zdGF0dXMoKSAhPSBXTF9DT05ORUNURUQgKSB7CiAgIGlmIChtaWxsaXMoKSAtIGxhc3RXaUZpQ2hlY2tUaWNrID4gMTAwMCkgewogICAgIGxhc3RXaUZpQ2hlY2tUaWNrID0gbWlsbGlzKCk7CiAgICAgIFdpRmkuYmVnaW4oKTsKICB9CiB9CiBlbHNlIHsKICAgaWYgKHRhc2tTdGFydGVkID09IGZhbHNlKSB7CiAgICAgdGFza1N0YXJ0ZWQgPSB0cnVlOwogICAgIFNlcmlhbC5wcmludCgiR2V0IElQIEFkZHJlc3M6ICIpOwogICAgICBTZXJpYWwucHJpbnRsbihXaUZpLmxvY2FsSVAoKSk7CiAgICAgIHN0YXJ0VENQQ2xpZW50KCk7CiAgICB9CiAgfQogfQp2b2lkIHNlbmR0b1RDUFNlcnZlcihTdHJpbmcgcCl7CiAgaWYgKCFUQ1BjbGllbnQuY29ubmVjdGVkKCkpCiAgewogICAgIFNlcmlhbC5wcmludGxuKCJDbGllbnQgaXMgbm90IHJlYWRseSIpOwogICAgICByZXR1cm47CiAgIH0KICAgVENQY2xpZW50LnByaW50KHApOwogICBwcmVIZWFydFRpY2sgPSBtaWxsaXMoKTsvL+W/g+i3s+iuoeaXtuW8gOWni++8jOmcgOimgeavj+malDYw56eS5Y+R6YCB5LiA5qyh5pWw5o2uCiAgfQp2b2lkIHN0YXJ0VENQQ2xpZW50KCl7CiBpZihUQ1BjbGllbnQuY29ubmVjdChUQ1BfU0VSVkVSX0FERFIsIGF0b2koVENQX1NFUlZFUl9QT1JUKSkpewogICBTZXJpYWwucHJpbnQoIkNvbm5lY3RlZCB0byBzZXJ2ZXI6Iik7CiAgIFNlcmlhbC5wcmludGxuKFRDUF9TRVJWRVJfQUREUik7CiAgIHN1YkZsYWcgPSB0cnVlOwogICBwcmVIZWFydFRpY2sgPSBtaWxsaXMoKTsKICAgVENQY2xpZW50LnNldE5vRGVsYXkodHJ1ZSk7Cn0KZWxzZXsKICBTZXJpYWwucHJpbnQoIkZhaWxlZCBjb25uZWN0ZWQgdG8gc2VydmVyOiIpOwogIFNlcmlhbC5wcmludGxuKFRDUF9TRVJWRVJfQUREUik7CiAgVENQY2xpZW50LnN0b3AoKTsKICBwcmVUQ1BDb25uZWN0ZWQgPSBmYWxzZTsKIH0KIHByZVRDUFN0YXJ0VGljayA9IG1pbGxpcygpOwogfQoKdm9pZCBwdWJsaXNoTXNnKFN0cmluZyB0b3BpYyxTdHJpbmcgbXNnKXsKIFN0cmluZyB0Y3BUZW1wPSIiOwogIHRjcFRlbXAgPSAiY21kPTImdWlkPSIrVUlEKyImdG9waWM9Iit0b3BpYysiJm1zZz0iK21zZysiXHJcbiI7CiAgc2VuZHRvVENQU2VydmVyKHRjcFRlbXApOwogIHRjcFRlbXA9IiI7CiAgU2VyaWFsLnByaW50bG4oIkEgbWVzc2FnZSBoYXMgYmVlbiBwdWJsaXNoZWQiKTsKICB9Cgp2b2lkIHN1YlRvcGljQ2VudGVyKCl7CiBpZihzdWJGbGFnID09IHRydWUpewogIHN1YkZsYWcgPSBmYWxzZTsKCiAgICBzdWJUb3BpYygibXljYXIiKTsKCiB9Cn0KCiAgdm9pZCBkb1RDUENsaWVudFRpY2soKXsKICBpZihXaUZpLnN0YXR1cygpICE9IFdMX0NPTk5FQ1RFRCkgcmV0dXJuOwogIGlmICghVENQY2xpZW50LmNvbm5lY3RlZCgpKSB7CiAgaWYocHJlVENQQ29ubmVjdGVkID09IHRydWUpewogICAgcHJlVENQQ29ubmVjdGVkID0gZmFsc2U7CiAgIHByZVRDUFN0YXJ0VGljayA9IG1pbGxpcygpOwogICBTZXJpYWwucHJpbnRsbigpOwogICBTZXJpYWwucHJpbnRsbigiVENQIENsaWVudCBkaXNjb25uZWN0ZWQuIik7CiAgVENQY2xpZW50LnN0b3AoKTsKIH0KZWxzZSBpZihtaWxsaXMoKSAtIHByZVRDUFN0YXJ0VGljayA+IDEqMTAwMCkKICBzdGFydFRDUENsaWVudCgpOwp9CmVsc2UKewogaWYgKFRDUGNsaWVudC5hdmFpbGFibGUoKSkgewogICBjaGFyIGMgPVRDUGNsaWVudC5yZWFkKCk7CiAgIFRjcENsaWVudF9CdWZmICs9YzsKICBUY3BDbGllbnRfQnVmZkluZGV4Kys7CiAgVGNwQ2xpZW50X3ByZVRpY2sgPSBtaWxsaXMoKTsKIGlmKFRjcENsaWVudF9CdWZmSW5kZXg+PU1BWF9QQUNLRVRTSVpFIC0gMSl7CiAgIFRjcENsaWVudF9CdWZmSW5kZXggPSBNQVhfUEFDS0VUU0laRS0yOwogICBUY3BDbGllbnRfcHJlVGljayA9IFRjcENsaWVudF9wcmVUaWNrIC0gMjAwOwogfQp9CmlmKG1pbGxpcygpIC0gcHJlSGVhcnRUaWNrID49IEtFRVBBTElWRUFUSU1FKXsKICBwcmVIZWFydFRpY2sgPSBtaWxsaXMoKTsKICBTZXJpYWwucHJpbnRsbigiLS1LZWVwIGFsaXZlOiIpOwogIHNlbmR0b1RDUFNlcnZlcigicGluZ1xyXG4iKTsKIH0KIH0KIGlmKChUY3BDbGllbnRfQnVmZi5sZW5ndGgoKSA+PSAxKSAmJiAobWlsbGlzKCkgLSBUY3BDbGllbnRfcHJlVGljaz49MjAwKSkKIHsKIFRDUGNsaWVudC5mbHVzaCgpOwogIFRjcENsaWVudF9CdWZmLnRyaW0oKTsKICAgU3RyaW5nIHRvcGljID0gIiI7CiAgIFN0cmluZyBtc2cgPSAiIjsKaWYoVGNwQ2xpZW50X0J1ZmYubGVuZ3RoKCkgPiAxNSl7CiAgaW50IHRvcGljSW5kZXggPSBUY3BDbGllbnRfQnVmZi5pbmRleE9mKCImdG9waWM9IikrNzsKICBpbnQgbXNnSW5kZXggPSBUY3BDbGllbnRfQnVmZi5pbmRleE9mKCImbXNnPSIpOwogIHRvcGljID0gVGNwQ2xpZW50X0J1ZmYuc3Vic3RyaW5nKHRvcGljSW5kZXgsbXNnSW5kZXgpOwogIG1zZyA9IFRjcENsaWVudF9CdWZmLnN1YnN0cmluZyhtc2dJbmRleCs1KTsKfQpTZXJpYWwucHJpbnRsbih0b3BpYyk7CiAgU2VyaWFsLnByaW50bG4obXNnKTsKICBpZiAoU2VyaWFsLmF2YWlsYWJsZSgpID4gMCkgewogICAgaWYgKFNlcmlhbC5yZWFkU3RyaW5nKCkgPT0gJ2wnKSB7CiAgICAgIGRpZ2l0YWxXcml0ZSgwLEhJR0gpOwogICAgICBkZWxheSgxMDAwKTsKICAgICAgcHVibGlzaE1zZygibXljYXIiLCAicyIpOwoKICAgIH0KICAgIGlmIChTZXJpYWwucmVhZFN0cmluZygpID09ICdyJykgewogICAgICBkaWdpdGFsV3JpdGUoMCxISUdIKTsKICAgICAgZGVsYXkoMTAwMCk7CiAgICAgIHB1Ymxpc2hNc2coIm15Y2FyIiwgInMiKTsKCiAgICB9CgogIH0KIG1zZyA9ICIiOwogdG9waWMgPSAiIjsKVGNwQ2xpZW50X0J1ZmY9IiI7ClRjcENsaWVudF9CdWZmSW5kZXggPSAwOwp9Cn0KCnZvaWQgc2V0dXAoKXsKICBTZXJpYWwuYmVnaW4oOTYwMCk7CiAgZG9XaUZpVGljaygpOwogIHBpbk1vZGUoMCwgT1VUUFVUKTsKfQoKdm9pZCBsb29wKCl7CiAgZG9UQ1BDbGllbnRUaWNrKCk7CiAgc3ViVG9waWNDZW50ZXIoKTsKfQ==</code>
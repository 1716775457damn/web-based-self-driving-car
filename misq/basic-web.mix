<xml version="Mixly 2.0 rc3" board="Arduino ESP8266@Generic ESP8266 Module"><block type="base_setup" id="UE!BO(_X]VXH;84UT0CV" x="-508" y="-336"><statement name="DO"><block type="WIFI_info" id="6ua15|8=O^~vYFTGU*Vx"><value name="SSID"><shadow type="text" id="MzV~4}Lu?Gtg}y?}FMI-"><field name="TEXT">ovo</field></shadow></value><value name="PWD"><shadow type="text" id="3mDav}E~kij~h7Q=;6zh"><field name="TEXT">twx20051</field></shadow></value><next><block type="init_Bemfa_TCP" id="AJmu}C]f?/75:]=x=5P-"><value name="tcp_Server"><shadow type="text" id="ggcg3RgKzA:{extb/}Yf"><field name="TEXT">bemfa.com</field></shadow></value><value name="tcp_port"><shadow type="math_number" id="7B!p_+N,6KqT[pe5{qzp"><field name="NUM">8344</field></shadow></value><value name="tcp_client_id"><shadow type="text" id="cOpSH_Vcln-SzvF/)#Rn"><field name="TEXT">c5af7df6bf9558c03f69df6ca3b3db12</field></shadow></value></block></next></block></statement></block><block type="bemfa_tcp_sub_topic_rev_msg" id="^+*Y*zY=b1C[5`4=O/;E" x="-514" y="-63"><statement name="DO"><block type="bemfa_tcp_Sub_Topic" id="BD:=!wx)09[$Fveeba{^"><value name="tcp_sub_Topic"><shadow type="text" id="}*!qb#ZN7=.QP=HZO#5["><field name="TEXT">mycar</field></shadow></value></block></statement><statement name="bemfa_function_tcp_rev_msg"><block type="controls_if" id="d3nEVGAmw;PgUZS#)hKJ"><value name="IF0"><block type="logic_compare" id="TSLcAdG/]/hbqJDNet5t"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="a}j{1n)S.@,@q/yulM9}"><field name="VAR">msg</field></block></value><value name="B"><block type="text_char" id="YzN`K!ii$edG2Vohz|Gl"><field name="TEXT">r</field></block></value></block></value><statement name="DO0"><block type="controls_delay" id="mIn40mK=[[!0LqIr8i?a"><field name="UNIT">delay</field><value name="DELAY_TIME"><shadow type="math_number" id="eh@kfTQ0E$2XC16dqpvb"><field name="NUM">1000</field></shadow></value><next><block type="bemfa_tcp_Pub_Topic_payload" id="MfoTPrq;=u$h.j@BZ#Or"><value name="pub_Topic"><shadow type="text" id="-?~OaXEFvDhrVF,Vspda"><field name="TEXT">mycar</field></shadow></value><value name="payload"><shadow type="text" id="L6QH~b^}g9xp|nrHHxOn"><field name="TEXT">w</field></shadow></value></block></next></block></statement><next><block type="controls_if" id=",uN)LOX7TzpZAFf(^N!f"><value name="IF0"><block type="logic_compare" id="U*9$=cBBeIEqL;=)I^PQ"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="t|zo6?ME?saTB7+I)^dy"><field name="VAR">msg</field></block></value><value name="B"><block type="text_char" id="a=nsn4;*zivmNC!:.(iv"><field name="TEXT">l</field></block></value></block></value><statement name="DO0"><block type="controls_delay" id="y/He5Tx`3fgJ]c=S-O0`"><field name="UNIT">delay</field><value name="DELAY_TIME"><shadow type="math_number" id="jIj62T1hZPws?GUcrwI("><field name="NUM">1000</field></shadow></value><next><block type="bemfa_tcp_Pub_Topic_payload" id=")!fena=$|}{hGy*_pc5w"><value name="pub_Topic"><shadow type="text" id="Dx3(dDq-B==[/`4n}M5a"><field name="TEXT">mycar</field></shadow></value><value name="payload"><shadow type="text" id=")yXL8OkGc*UJ^z=Y#].u"><field name="TEXT">s</field></shadow></value></block></next></block></statement></block></next></block></statement></block></xml><config>{"mmu":"3232","CrystalFreq":"26","FlashFreq":"40","FlashMode":"dout","eesz":"1M64"}</config><code>CiNpbmNsdWRlIDxFU1A4MjY2V2lGaS5oPgojZGVmaW5lIFRDUF9TRVJWRVJfQUREUiAiYmVtZmEuY29tIgojZGVmaW5lIFRDUF9TRVJWRVJfUE9SVCAiODM0NCIKI2lmbmRlZiBBUF9DT05GSUcKU3RyaW5nIFVJRCA9ICJjNWFmN2RmNmJmOTU1OGMwM2Y2OWRmNmNhM2IzZGIxMiI7CiNlbmRpZgojZGVmaW5lIE1BWF9QQUNLRVRTSVpFIDUxMgojZGVmaW5lIEtFRVBBTElWRUFUSU1FIDMwKjEwMDAKV2lGaUNsaWVudCBUQ1BjbGllbnQ7ClN0cmluZyBUY3BDbGllbnRfQnVmZiA9ICIiOwp1bnNpZ25lZCBpbnQgVGNwQ2xpZW50X0J1ZmZJbmRleCA9IDA7CnVuc2lnbmVkIGxvbmcgVGNwQ2xpZW50X3ByZVRpY2sgPSAwOwp1bnNpZ25lZCBsb25nIHByZUhlYXJ0VGljayA9IDA7CnVuc2lnbmVkIGxvbmcgcHJlVENQU3RhcnRUaWNrID0gMDsKYm9vbCBwcmVUQ1BDb25uZWN0ZWQgPSBmYWxzZTsKYm9vbCBzdWJGbGFnID0gZmFsc2U7CnZvaWQgZG9XaUZpVGljaygpOwp2b2lkIGRvVENQQ2xpZW50VGljaygpOwp2b2lkIHNlbmR0b1RDUFNlcnZlcihTdHJpbmcgcCk7CnZvaWQgc3ViVG9waWMoU3RyaW5nIHRvcGljKXsKICBTdHJpbmcgdGNwVGVtcD0iIjsKICB0Y3BUZW1wID0gImNtZD0xJnVpZD0iK1VJRCsiJnRvcGljPSIrdG9waWMrIlxyXG4iOwogIHNlbmR0b1RDUFNlcnZlcih0Y3BUZW1wKTsKICB0Y3BUZW1wPSIiOwogIFNlcmlhbC5wcmludCgic3ViIHRvcGljOiIpO1NlcmlhbC5wcmludGxuKHRvcGljKTsKICB9CnZvaWQgZG9XaUZpVGljaygpewogc3RhdGljIGJvb2wgdGFza1N0YXJ0ZWQgPSBmYWxzZTsKIHN0YXRpYyB1aW50MzJfdCBsYXN0V2lGaUNoZWNrVGljayA9IDA7CiBpZiAoIFdpRmkuc3RhdHVzKCkgIT0gV0xfQ09OTkVDVEVEICkgewogICBpZiAobWlsbGlzKCkgLSBsYXN0V2lGaUNoZWNrVGljayA+IDEwMDApIHsKICAgICBsYXN0V2lGaUNoZWNrVGljayA9IG1pbGxpcygpOwogIH0KIH0KIGVsc2UgewogICBpZiAodGFza1N0YXJ0ZWQgPT0gZmFsc2UpIHsKICAgICB0YXNrU3RhcnRlZCA9IHRydWU7CiAgICAgU2VyaWFsLnByaW50KCJHZXQgSVAgQWRkcmVzczogIik7CiAgICAgIFNlcmlhbC5wcmludGxuKFdpRmkubG9jYWxJUCgpKTsKICAgICAgc3RhcnRUQ1BDbGllbnQoKTsKICAgIH0KICB9CiB9CnZvaWQgc2VuZHRvVENQU2VydmVyKFN0cmluZyBwKXsKICBpZiAoIVRDUGNsaWVudC5jb25uZWN0ZWQoKSkKICB7CiAgICAgU2VyaWFsLnByaW50bG4oIkNsaWVudCBpcyBub3QgcmVhZGx5Iik7CiAgICAgIHJldHVybjsKICAgfQogICBUQ1BjbGllbnQucHJpbnQocCk7CiAgIHByZUhlYXJ0VGljayA9IG1pbGxpcygpOy8v5b+D6Lez6K6h5pe25byA5aeL77yM6ZyA6KaB5q+P6ZqUNjDnp5Llj5HpgIHkuIDmrKHmlbDmja4KICB9CnZvaWQgc3RhcnRUQ1BDbGllbnQoKXsKIGlmKFRDUGNsaWVudC5jb25uZWN0KFRDUF9TRVJWRVJfQUREUiwgYXRvaShUQ1BfU0VSVkVSX1BPUlQpKSl7CiAgIFNlcmlhbC5wcmludCgiQ29ubmVjdGVkIHRvIHNlcnZlcjoiKTsKICAgU2VyaWFsLnByaW50bG4oVENQX1NFUlZFUl9BRERSKTsKICAgc3ViRmxhZyA9IHRydWU7CiAgIHByZUhlYXJ0VGljayA9IG1pbGxpcygpOwogICBUQ1BjbGllbnQuc2V0Tm9EZWxheSh0cnVlKTsKfQplbHNlewogIFNlcmlhbC5wcmludCgiRmFpbGVkIGNvbm5lY3RlZCB0byBzZXJ2ZXI6Iik7CiAgU2VyaWFsLnByaW50bG4oVENQX1NFUlZFUl9BRERSKTsKICBUQ1BjbGllbnQuc3RvcCgpOwogIHByZVRDUENvbm5lY3RlZCA9IGZhbHNlOwogfQogcHJlVENQU3RhcnRUaWNrID0gbWlsbGlzKCk7CiB9Cgp2b2lkIHB1Ymxpc2hNc2coU3RyaW5nIHRvcGljLFN0cmluZyBtc2cpewogU3RyaW5nIHRjcFRlbXA9IiI7CiAgdGNwVGVtcCA9ICJjbWQ9MiZ1aWQ9IitVSUQrIiZ0b3BpYz0iK3RvcGljKyImbXNnPSIrbXNnKyJcclxuIjsKICBzZW5kdG9UQ1BTZXJ2ZXIodGNwVGVtcCk7CiAgdGNwVGVtcD0iIjsKICBTZXJpYWwucHJpbnRsbigiQSBtZXNzYWdlIGhhcyBiZWVuIHB1Ymxpc2hlZCIpOwogIH0KCnZvaWQgc3ViVG9waWNDZW50ZXIoKXsKIGlmKHN1YkZsYWcgPT0gdHJ1ZSl7CiAgc3ViRmxhZyA9IGZhbHNlOwoKICAgIHN1YlRvcGljKCJteWNhciIpOwoKIH0KfQoKICB2b2lkIGRvVENQQ2xpZW50VGljaygpewogIGlmKFdpRmkuc3RhdHVzKCkgIT0gV0xfQ09OTkVDVEVEKSByZXR1cm47CiAgaWYgKCFUQ1BjbGllbnQuY29ubmVjdGVkKCkpIHsKICBpZihwcmVUQ1BDb25uZWN0ZWQgPT0gdHJ1ZSl7CiAgICBwcmVUQ1BDb25uZWN0ZWQgPSBmYWxzZTsKICAgcHJlVENQU3RhcnRUaWNrID0gbWlsbGlzKCk7CiAgIFNlcmlhbC5wcmludGxuKCk7CiAgIFNlcmlhbC5wcmludGxuKCJUQ1AgQ2xpZW50IGRpc2Nvbm5lY3RlZC4iKTsKICBUQ1BjbGllbnQuc3RvcCgpOwogfQplbHNlIGlmKG1pbGxpcygpIC0gcHJlVENQU3RhcnRUaWNrID4gMSoxMDAwKQogIHN0YXJ0VENQQ2xpZW50KCk7Cn0KZWxzZQp7CiBpZiAoVENQY2xpZW50LmF2YWlsYWJsZSgpKSB7CiAgIGNoYXIgYyA9VENQY2xpZW50LnJlYWQoKTsKICAgVGNwQ2xpZW50X0J1ZmYgKz1jOwogIFRjcENsaWVudF9CdWZmSW5kZXgrKzsKICBUY3BDbGllbnRfcHJlVGljayA9IG1pbGxpcygpOwogaWYoVGNwQ2xpZW50X0J1ZmZJbmRleD49TUFYX1BBQ0tFVFNJWkUgLSAxKXsKICAgVGNwQ2xpZW50X0J1ZmZJbmRleCA9IE1BWF9QQUNLRVRTSVpFLTI7CiAgIFRjcENsaWVudF9wcmVUaWNrID0gVGNwQ2xpZW50X3ByZVRpY2sgLSAyMDA7CiB9Cn0KaWYobWlsbGlzKCkgLSBwcmVIZWFydFRpY2sgPj0gS0VFUEFMSVZFQVRJTUUpewogIHByZUhlYXJ0VGljayA9IG1pbGxpcygpOwogIFNlcmlhbC5wcmludGxuKCItLUtlZXAgYWxpdmU6Iik7CiAgc2VuZHRvVENQU2VydmVyKCJwaW5nXHJcbiIpOwogfQogfQogaWYoKFRjcENsaWVudF9CdWZmLmxlbmd0aCgpID49IDEpICYmIChtaWxsaXMoKSAtIFRjcENsaWVudF9wcmVUaWNrPj0yMDApKQogewogVENQY2xpZW50LmZsdXNoKCk7CiAgVGNwQ2xpZW50X0J1ZmYudHJpbSgpOwogICBTdHJpbmcgdG9waWMgPSAiIjsKICAgU3RyaW5nIG1zZyA9ICIiOwppZihUY3BDbGllbnRfQnVmZi5sZW5ndGgoKSA+IDE1KXsKICBpbnQgdG9waWNJbmRleCA9IFRjcENsaWVudF9CdWZmLmluZGV4T2YoIiZ0b3BpYz0iKSs3OwogIGludCBtc2dJbmRleCA9IFRjcENsaWVudF9CdWZmLmluZGV4T2YoIiZtc2c9Iik7CiAgdG9waWMgPSBUY3BDbGllbnRfQnVmZi5zdWJzdHJpbmcodG9waWNJbmRleCxtc2dJbmRleCk7CiAgbXNnID0gVGNwQ2xpZW50X0J1ZmYuc3Vic3RyaW5nKG1zZ0luZGV4KzUpOwp9CmlmIChtc2cgPT0gJ3InKSB7CiAgICBkZWxheSgxMDAwKTsKICAgIHB1Ymxpc2hNc2coIm15Y2FyIiwgInciKTsKCiAgfQogIGlmIChtc2cgPT0gJ2wnKSB7CiAgICBkZWxheSgxMDAwKTsKICAgIHB1Ymxpc2hNc2coIm15Y2FyIiwgInMiKTsKCiAgfQogbXNnID0gIiI7CiB0b3BpYyA9ICIiOwpUY3BDbGllbnRfQnVmZj0iIjsKVGNwQ2xpZW50X0J1ZmZJbmRleCA9IDA7Cn0KfQoKdm9pZCBzZXR1cCgpewogIFdpRmkuYmVnaW4oIm92byIsICJ0d3gyMDA1MSIpOwogIHdoaWxlIChXaUZpLnN0YXR1cygpICE9IFdMX0NPTk5FQ1RFRCkgewogICAgZGVsYXkoNTAwKTsKICAgIFNlcmlhbC5wcmludCgiLiIpOwogIH0KICBTZXJpYWwucHJpbnRsbigiTG9jYWwgSVA6Iik7CiAgU2VyaWFsLnByaW50KFdpRmkubG9jYWxJUCgpKTsKCiAgZG9XaUZpVGljaygpOwp9Cgp2b2lkIGxvb3AoKXsKICBkb1RDUENsaWVudFRpY2soKTsKICBzdWJUb3BpY0NlbnRlcigpOwp9</code>